[{"content":"\r\n\r\n## 简介\r\n\r\nQCustomPlot是一个用于Qt作图的函数库，使用十分方便，只需将qcustomplot.h和qcustomplot.cpp两个文件加入工程即可。\r\n在作图时我们经常会有图形交互的需求，例如图形移动、缩放，获取数据点信息等，在这方面QCustomPlot提供了很方便的接口。\r\n\r\n![QCustomPlot作图示例](/images/qcustomplot0.png)\r\n\r\n## 设置交互类型\r\nQCustomPlot提供了`setInteractions()`函数接口来设置图形的交互类型。如下代码所示，将图形的拖拽、缩放以及数据选择操作设为真。\r\n\r\n``` cpp\r\nqcustomplot-\u003esetInteractions(QCP::iRangeDrag | QCP::iRangeZoom | QCP::iSelectPlottables);\r\n```\r\n只要设置了`QCP::iRangeDrag`和`QCP::iRangeZoom`，图形边自动具有鼠标拖拽和利用滚轮缩放功能了，十分方便。\r\n\r\n## 获取数据点信息\r\n设置了`QCP::iSelectPlottables`后，图形便可以选择了，利用`plottableClick`和`plottableDoubleClick`信号可以对数据的单击和双击响应进行设置。\r\n\r\n下面我们通过一个例子，实现单击数据点获取其位置（x坐标）和数据点的值（y坐标）。\r\n\r\n首先添加一个槽函数：获取被点击的图的name、数据点的位置、数据点的值输出。\r\n``` cpp\r\nvoid ClassName::graphClicked(QCPAbstractPlottable *plottable, int dataIndex)\r\n{\r\n  double dataValue = plottable-\u003einterface1D()-\u003edataMainValue(dataIndex);\r\n  double dataKey = plottable-\u003einterface1D()-\u003edataMainKey(dataIndex);\r\n  QString message = QString(\"Clicked on graph '%1' at data point #%2 with value %3.\").arg(plottable-\u003ename()).arg(dataIndex).arg(dataValue);\r\n  qDebug() \u003c\u003c message;\r\n}\r\n```\r\n\r\n再将鼠标单击信号与槽函数连接即可：\r\n``` cpp\r\nconnect(qcustomplot,\r\n            SIGNAL(plottableClick(QCPAbstractPlottable*,int,QMouseEvent*)),\r\n            this,\r\n            SLOT(graphClicked(QCPAbstractPlottable*,int)));\r\n```\r\n","cover":"/images/qcustomplot0.png","link":"qcustomplot1-intereaction.html","preview":"\u003cp\u003eQCustomplot图形交互接口学习。\u003c/p\u003e\n","title":"QCustomplot学习笔记1-图形交互"}]